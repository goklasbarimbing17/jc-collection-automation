package com.collection.stepdefinitions;

import com.collection.hooks.Hooks;
import com.collection.pages.MasterPersonPage;
import com.collection.pages.PaymentVerifikasiPage;
import com.collection.pages.SpecialCasePage;
import com.relevantcodes.extentreports.ExtentTest;
import com.relevantcodes.extentreports.LogStatus;
import io.cucumber.java.en.Then;
import io.cucumber.java.en.When;
import io.cucumber.messages.types.Hook;
import org.openqa.selenium.WebDriver;
import org.testng.Assert;

public class TestPaymentVerifikasi {
    public static WebDriver driver;
    public static ExtentTest extentTest;
    public static PaymentVerifikasiPage paymentVerifikasiPage = new PaymentVerifikasiPage();
    private String getTextName;
    private String getTextNamePaid;

    public TestPaymentVerifikasi() {
        driver = Hooks.driver;
        extentTest = Hooks.extentTest;
    }

    @When("klik navigation payment")
    public void klik_navigation_payment() {
        Hooks.delay(1);
        paymentVerifikasiPage.klikNavPayment();
        extentTest.log(LogStatus.PASS, "Klik Navigation payment");
    }

    @When("klik menu verfikasi")
    public void klik_menu_verfikasi() {
        Hooks.delay(1);
        paymentVerifikasiPage.klikMenuVerifikasi();
        extentTest.log(LogStatus.PASS, "Klik menu verifikasi");
    }

    @Then("Menampilkan view form verifikasi")
    public void menampilkan_view_form_verifikasi() {
        Hooks.delay(1);
        Assert.assertTrue(paymentVerifikasiPage.txtResultVerifikasiPage().contains("DATA PEMBAYARAN"));
        extentTest.log(LogStatus.PASS, "Menampilkan view form verifikasi");
    }

    @When("input keyword search Verifikasi {string}")
    public void input_keyword_search_verifikasi(String keyword) {
        Hooks.delay(1);
        paymentVerifikasiPage.inputKeywordSearch(keyword);
        extentTest.log(LogStatus.PASS, "Input keyword search");
    }

    @When("klik button search Verifikasi")
    public void klik_button_search_verifikasi() {
        Hooks.delay(1);
        paymentVerifikasiPage.klikBtnSearch();
        extentTest.log(LogStatus.PASS, "Klik button search");
    }

    @Then("Menampilkan data Verifikasi berdasarkan keyword yang di cari {string} {string}")
    public void menampilkan_data_verifikasi_berdasarkan_keyword_yang_di_cari(String result, String searchBy) {
        Hooks.delay(1);
        if (searchBy.contains("nipp")) {
            Assert.assertTrue(paymentVerifikasiPage.getResultNipp().contains(result));
            extentTest.log(LogStatus.PASS, "Menampilkan data special case berdasarkan nipp");
        } else if (searchBy.equals("name")) {
            Assert.assertTrue(paymentVerifikasiPage.getResultName().contains(result));
            extentTest.log(LogStatus.PASS, "Menampilkan data special case bedasarkan Name");
        } else if (searchBy.equals("class name")) {
            Assert.assertTrue(paymentVerifikasiPage.getResultClassName().contains(result));
            extentTest.log(LogStatus.PASS, "Menampilkan data special case berdasarkan Class Name");
        } else if (searchBy.contains("channel payment")) {
            Assert.assertTrue(paymentVerifikasiPage.getResultChannelName().contains(result));
            extentTest.log(LogStatus.PASS, "Menampilkan data special case berdasarkan Channel payment");
        } else if (searchBy.contains("negatif test")) {
            Assert.assertTrue(paymentVerifikasiPage.getResultNoEntries().contains(result));
            extentTest.log(LogStatus.PASS, "Tidak menampilkan data Pembayaran");
        } else {
            System.err.println("Status tidak diketahui");
        }
    }

    @When("pilih dropdown class name verifikasi")
    public void pilih_dropdown_class_name_verifikasi() {
        paymentVerifikasiPage.klikMenuVerifikasi();
        Hooks.delay(1);
        paymentVerifikasiPage.setDropdownClassName(1);
        extentTest.log(LogStatus.PASS, "Pilih dropdown class name verifikasi");
    }

    @Then("Menampilkan data verifikasi berdasarkan class name")
    public void menampilkan_data_verifikasi_berdasarkan_class_name() {
        Hooks.delay(1);
        Assert.assertTrue(paymentVerifikasiPage.getResultClassName().contains("MERN - PINTAR 17"));
        extentTest.log(LogStatus.PASS, "Menampilkan data verfikasi berdasarkan class name");
    }

    @When("pilih dropdown status verifikasi")
    public void pilih_dropdown_status_verifikasi() {
        Hooks.delay(1);
        paymentVerifikasiPage.setDropdownChannelName(7);
        extentTest.log(LogStatus.PASS, "Pilih dropdown channel name verifikasi");
    }

    @Then("Menampilkan data verifikasi berdasarkan channel name")
    public void menampilkan_data_verifikasi_berdasarkan_channel_name() {
        Hooks.delay(1);
        Assert.assertTrue(paymentVerifikasiPage.getResultChannelName().contains("CASH BERTAHAP"));
        extentTest.log(LogStatus.PASS, "Menampilkan data verifikasi berdasarkan channel name");
    }

    @When("klik row yang ini di show detail informasi payment")
    public void klik_row_yang_ini_di_show_detail_informasi_payment() {
        Hooks.delay(1);
        paymentVerifikasiPage.klikMenuVerifikasi();
        Hooks.delay(1);
        paymentVerifikasiPage.klikRowData();
        extentTest.log(LogStatus.PASS, "Klik row yang ingin di show detail informasi payment");
    }

    @Then("menampilkan form detail informasi payment")
    public void menampilkan_form_detail_informasi_payment() {
        Hooks.delay(1);
        Assert.assertTrue(paymentVerifikasiPage.getResultDetailPayment().contains("Data Detail"));
        extentTest.log(LogStatus.PASS, "Menampilkan form detail informasi payment");
    }

    @When("klik button unpaid")
    public void klik_button_unpaid() {
        Hooks.delay(1);
        getTextName = paymentVerifikasiPage.getPersonName();
        paymentVerifikasiPage.klikBtnUnpaid();
        extentTest.log(LogStatus.PASS, "Klik button unpaid");
    }
    @When("Klik Yes pada popup unpaid")
    public void klik_yes_pada_popup_unpaid() {
        Hooks.delay(1);
        paymentVerifikasiPage.klikBtnOKPopup();
        extentTest.log(LogStatus.PASS, "Klik yes pada popup unpadi");
    }

    @Then("data berhasil di update ke menu unpaid")
    public void data_berhasil_di_update_ke_menu_unpaid() {
        Hooks.delay(1);
        Assert.assertTrue(paymentVerifikasiPage.getResultVerifikasi().contains("Data telah diperbarui !"));
        Hooks.delay(1);
        paymentVerifikasiPage.klikBtnOKPopup();
        paymentVerifikasiPage.klikMenuUnpaid();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        paymentVerifikasiPage.setSearchUnpaid(getTextName);
        Hooks.delay(1);
        Assert.assertTrue(paymentVerifikasiPage.getNamaUnpaid().contains(getTextName));
        extentTest.log(LogStatus.PASS, "Data berhasil di update ke menu unpaid");
    }

    @When("klik button verifikasi")
    public void klik_button_verifikasi() {
        Hooks.delay(1);
        paymentVerifikasiPage.klikMenuVerifikasi();
        paymentVerifikasiPage.klikRowData();
        getTextNamePaid = paymentVerifikasiPage.getPersonName();
        Hooks.delay(1);
        paymentVerifikasiPage.klikBtnVerifikasi();
        extentTest.log(LogStatus.PASS, "Klik button verifikasi");
    }
    @When("Klik Yes pada popup verifikasi")
    public void klik_yes_pada_popup_verifikasi() {
        Hooks.delay(1);
        paymentVerifikasiPage.klikBtnOKPopup();
        extentTest.log(LogStatus.PASS, "Klik Yes pada popup verifikasi");
    }

    @Then("data berhasil di update ke menu paid")
    public void data_berhasil_di_update_ke_menu_paid() {
        Hooks.delay(1);
        Assert.assertTrue(paymentVerifikasiPage.getResultVerifikasi().contains("Data telah diperbarui !"));
        Hooks.delay(1);
        paymentVerifikasiPage.klikBtnOKPopup();
        paymentVerifikasiPage.klikMenuPaid();
        paymentVerifikasiPage.setSearchPaid(getTextNamePaid);
        Hooks.delay(1);
        Assert.assertTrue(paymentVerifikasiPage.getNamaPaid().contains(getTextNamePaid));
        extentTest.log(LogStatus.PASS, "Data berhasil di update ke menu paid");
    }
}